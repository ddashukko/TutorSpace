<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ê–ª–≥–µ–±—Ä–∞ 10: –†—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
  <style>
    body{margin:0;font-family:Inter,Segoe UI,Arial,sans-serif;display:flex;height:100vh;overflow:hidden;background:#f4f7f9}
    #tasks-section{flex:1;display:flex;flex-direction:column;background:#fff;border-right:1px solid #e6eef6;overflow:auto}
    header{display:flex;align-items:center;justify-content:space-between;padding:12px 18px;border-bottom:1px solid #eef2f7;background:#fff;position:sticky;top:0;z-index:20}
    .content-container{padding:18px;max-width:980px;margin:0 auto}
    .exercise-block{margin-bottom:18px;border:1px solid #e9f0f7;border-radius:10px;padding:14px;background:#fff}
    .theory-box{background:#f0f7ff;padding:12px;border-radius:8px;border-left:4px solid #2563eb;margin-bottom:12px}
    .task-item{padding:10px 0;border-top:1px dashed #f0f4f8}
    .task-item:first-of-type{border-top:none}
    .input-group{display:flex;gap:8px;margin-top:8px}
    input[type="text"]{flex:1;padding:8px;border:1px solid #cbd5e1;border-radius:8px;font-size:1rem}
    input.correct{border-color:#10b981;background:#ecfdf5}
    input.wrong{border-color:#ef4444;background:#fff1f2}
    .btn-check{background:#2563eb;color:#fff;padding:8px 12px;border-radius:8px;border:none;font-weight:600}
    .sol-btn{background:none;border:none;color:#2563eb;text-decoration:underline;cursor:pointer;padding:6px}
    .hidden-box{display:none;margin-top:8px;padding:10px;background:#fffbeb;border:1px dashed #f59e0b;border-radius:6px}
    .btn-finish{background:#0f172a;color:#fff;padding:12px;border-radius:10px;border:none;width:100%;font-weight:700;margin-top:12px}
    #board-section{width:42%;min-width:320px;display:flex;flex-direction:column;background:#f8fafc}
    .tools{padding:10px;background:#f1f5f9;border-bottom:1px solid #e6eef6;display:flex;gap:8px}
    #board{flex:1;background:#fff;display:block;width:100%;height:100%}
    .btn-tool{padding:8px 10px;border-radius:8px;border:1px solid #cbd5e1;background:#fff;cursor:pointer}
    .btn-tool.active{background:#2563eb;color:#fff}
  </style>
</head>
<body>

  <div id="tasks-section">
    <header>
      <a href="#" class="btn-home" style="color:#64748b;text-decoration:none">‚Üê –ù–∞–∑–∞–¥</a>
      <div id="lesson-title-display" style="font-weight:700;font-size:1.05rem;text-align:center">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É—Ä–æ–∫—É...</div>
      <div class="stats-container">‚úÖ <span id="val-correct">0</span> ‚ùå <span id="val-wrong">0</span></div>
      <button id="toggle-board-btn" class="btn-tool" onclick="toggleBoard()">–î–æ—à–∫–∞</button>
    </header>

    <div class="content-container">
      <div id="quiz-root"></div>
      <button class="btn-finish" onclick="finishLesson()">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫</button>
    </div>
  </div>

  <div id="board-section">
    <div class="tools">
      <button class="btn-tool active" id="t-pen" onclick="setTool('pen')">üñäÔ∏è</button>
      <button class="btn-tool" id="t-eraser" onclick="setTool('eraser')">üßπ</button>
      <button class="btn-tool" onclick="drawGrid()">üåê</button>
      <button class="btn-tool" onclick="clearCanvas()" style="color:red">‚ùå</button>
    </div>
    <canvas id="board"></canvas>
  </div>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <script>
    /* ---------- –î–∞–Ω—ñ —É—Ä–æ–∫—É (–≤—Å—ñ 20 –∑–∞–≤–¥–∞–Ω—å) ---------- */
    const LESSON_DATA = {
      title: "–ê–ª–≥–µ–±—Ä–∞ 10: –õ—ñ–Ω—ñ–π–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏",
      exercises: [
        {
          id: "info",
          title: "üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞: –ü—Ä–∞–≤–∏–ª–∞ –≥—Ä–∏",
          desc: "–§—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω—å",
          visual: `
            <div class="theory-box">
              <p><strong>1. –ü—Ä–∞–≤–∏–ª–æ —Ç–µ—Ä–µ–∑—ñ–≤:</strong> –©–æ —Ä–æ–±–∏–º–æ –∑ –ª—ñ–≤–æ—é —á–∞—Å—Ç–∏–Ω–æ—é, —Ç–µ —Å–∞–º–µ —Ä–æ–±–∏–º–æ –∑ –ø—Ä–∞–≤–æ—é.</p>
              <p><strong>2. –¢—Ä–∏ –æ–±–ª–∏—á—á—è \\(ax=b\\):</strong></p>
              <ul style="margin:0;padding-left:18px">
                <li>–Ø–∫—â–æ \\(a\\neq0\\) ‚Üí \\(x=\\dfrac{b}{a}\\).</li>
                <li>–Ø–∫—â–æ \\(a=0\\) —ñ \\(b\\neq0\\) ‚Üí –Ω–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤.</li>
                <li>–Ø–∫—â–æ \\(a=0\\) —ñ \\(b=0\\) ‚Üí –±–µ–∑–ª—ñ—á —Ä–æ–∑–≤'—è–∑–∫—ñ–≤.</li>
              </ul>
              <p><strong>3. –î—Ä–æ–±–∏:</strong> \\(\\dfrac{A}{B}=0\\) —è–∫—â–æ \\(A=0\\) —Ç–∞ \\(B\\neq0\\).</p>
            </div>
          `,
          tasks: []
        },
        {
          id: "s1",
          title: "–†–æ–∑–¥—ñ–ª 1: –õ–æ–≥—ñ–∫–∞ —Ä—ñ–≤–Ω–æ–≤–∞–≥–∏ (–ë–∞–∑–æ–≤—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è)",
          tasks: [
            {id:"1", q:"$x + 14 = 30$", a:"16", solution:"$x = 30 - 14$"},
            {id:"2", q:"$x - 9 = -5$", a:"4", solution:"$x = -5 + 9$"},
            {id:"3", q:"$25 - x = 10$", a:"15", solution:"$x = 25 - 10$"},
            {id:"4", q:"$12 + x = 2$", a:"-10", solution:"$x = 2 - 12$"},
            {id:"5", q:"$x - 1.5 = 2$", a:"3.5", solution:"$x = 2 + 1.5$"}
          ]
        },
        {
          id: "s2",
          title: "–†–æ–∑–¥—ñ–ª 2: –û—Å–Ω–æ–≤–Ω–∞ —Ñ–æ—Ä–º–∞ $ax = b$",
          tasks: [
            {id:"6", q:"$5x = 45$", a:"9", solution:"$x = 45 / 5$"},
            {id:"7", q:"$-3x = 21$", a:"-7", solution:"$x = 21 / (-3)$"},
            {id:"8", q:"$0.2x = 4$", a:"20", solution:"$x = 4 / 0.2 = 4 \\cdot 5$"},
            {id:"9", q:"$0x = 10$", a:"–Ω–µ–º–∞—î", solution:"–ù–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤"},
            {id:"10", q:"$0x = 0$", a:"–±–µ–∑–ª—ñ—á", solution:"–ë–µ–∑–ª—ñ—á —Ä–æ–∑–≤'—è–∑–∫—ñ–≤"}
          ]
        },
        {
          id: "s3",
          title: "–†–æ–∑–¥—ñ–ª 3: –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–∞—Å—Ç–∫–∏ (–û–î–ó)",
          tasks: [
            {id:"11", q:"$\\dfrac{x-5}{x+2} = 0$", a:"5", solution:"–ß–∏—Å–µ–ª—å–Ω–∏–∫ 0 ‚Üí x=5; –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ 5+2‚â†0"},
            {id:"12", q:"$\\dfrac{2x+6}{x-1} = 0$", a:"-3", solution:"2x+6=0 ‚Üí x=-3; –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ ‚â†0"},
            {id:"13", q:"$\\dfrac{x-4}{x-4} = 0$", a:"–Ω–µ–º–∞—î", solution:"x=4 –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ (–∑–Ω–∞–º–µ–Ω–Ω–∏–∫ 0)"},
            {id:"14", q:"$\\dfrac{x(x-2)}{x} = 0$", a:"2", solution:"x‚â†0; –∑ —á–∏—Å–µ–ª—å–Ω–∏–∫–∞ x=0 –∞–±–æ x=2 ‚Üí –ª–∏—à–∞—î—Ç—å—Å—è x=2"},
            {id:"15", q:"$\\dfrac{x^2-9}{x-3} = 0$", a:"-3", solution:"–∫–æ—Ä–µ–Ω—ñ 3 —ñ -3; x=3 –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ ‚Üí x=-3"}
          ]
        },
        {
          id: "s4",
          title: "–†–æ–∑–¥—ñ–ª 4: –í—Å—Ç—É–ø –¥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤",
          tasks: [
            {id:"16", q:"$ax = 5$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a:"0", solution:"a=0 ‚Üí 0x=5 –Ω–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤"},
            {id:"17", q:"$(a-2)x = 0$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –∫–æ—Ä–µ–Ω—ñ–≤ –±–µ–∑–ª—ñ—á?", a:"2", solution:"a=2 ‚Üí 0x=0 –±–µ–∑–ª—ñ—á"},
            {id:"18", q:"$\\dfrac{x-3}{x-a} = 0$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a:"3", solution:"a=3 ‚Üí –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –∫–æ—Ä—ñ–Ω—å x=3 –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–π"},
            {id:"19", q:"$(a+5)x = 7$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a:"-5", solution:"a=-5 ‚Üí 0x=7 –Ω–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤"},
            {id:"20", q:"$\\dfrac{x-a}{x-7} = 0$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a:"7", solution:"a=7 ‚Üí –∫–æ—Ä—ñ–Ω—å x=7 —Ä–æ–±–∏—Ç—å –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ 0"}
          ]
        }
      ]
    };

    /* ---------- –†–µ–Ω–¥–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç—É ---------- */
    function renderLessonData(){
      const root = document.getElementById('quiz-root');
      root.innerHTML = '';
      document.title = LESSON_DATA.title;
      document.getElementById('lesson-title-display').textContent = LESSON_DATA.title;

      LESSON_DATA.exercises.forEach(section => {
        const sec = document.createElement('section');
        sec.className = 'exercise-block';
        const h = document.createElement('h3');
        h.textContent = section.title;
        sec.appendChild(h);
        if(section.desc){
          const p = document.createElement('p');
          p.textContent = section.desc;
          sec.appendChild(p);
        }
        if(section.visual){
          const v = document.createElement('div');
          v.innerHTML = section.visual;
          sec.appendChild(v);
        }
        if(Array.isArray(section.tasks) && section.tasks.length){
          section.tasks.forEach(task => {
            const t = document.createElement('div');
            t.className = 'task-item';
            t.innerHTML = `<div><strong>${task.id}.</strong> <span class="question">${task.q}</span></div>`;
            const ig = document.createElement('div'); ig.className='input-group';
            const input = document.createElement('input'); input.type='text'; input.placeholder='–í–∞—à–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å'; input.dataset.answer = String(task.a);
            const btn = document.createElement('button'); btn.className='btn-check'; btn.textContent='–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏';
            btn.onclick = () => checkAnswer(input, task.a);
            const solBtn = document.createElement('button'); solBtn.className='sol-btn'; solBtn.textContent='–ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–æ–∑–≤\'—è–∑–∞–Ω–Ω—è';
            const solBox = document.createElement('div'); solBox.className='hidden-box'; solBox.innerHTML = `<strong>–í—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> ${task.a}<br><strong>–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è:</strong> ${task.solution || ''}`;
            solBtn.onclick = () => solBox.style.display = solBox.style.display === 'block' ? 'none' : 'block';
            ig.appendChild(input); ig.appendChild(btn); ig.appendChild(solBtn);
            t.appendChild(ig); t.appendChild(solBox);
            sec.appendChild(t);
          });
        }
        root.appendChild(sec);
      });

      // —Ä–µ–Ω–¥–µ—Ä —Ñ–æ—Ä–º—É–ª KaTeX
      renderMathInElement(document.getElementById('quiz-root'), {
        delimiters: [{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true}],
        throwOnError:false
      });
    }

    /* ---------- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (–≥–Ω—É—á–∫–∞) ---------- */
    function normalize(s){
      if(s === null || s === undefined) return '';
      return String(s).trim().replace(',', '.');
    }
    function isNumericString(s){
      return /^-?\d+(\.\d+)?$/.test(s);
    }
    function checkAnswer(inputEl, correct){
      const user = normalize(inputEl.value);
      const corr = normalize(correct);
      // —è–∫—â–æ –æ–±–∏–¥–≤–∞ —á–∏—Å–ª–∞ ‚Äî –ø–æ—Ä—ñ–≤–Ω—é—î–º–æ —á–∏—Å–µ–ª—å–Ω–æ
      if(isNumericString(user) && isNumericString(corr)){
        const nu = Number(user), nc = Number(corr);
        if(Math.abs(nu - nc) < 1e-9){
          markCorrect(inputEl);
        } else markWrong(inputEl);
      } else {
        // —Ç–µ–∫—Å—Ç–æ–≤–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (—Ä–µ–≥—ñ—Å—Ç—Ä –Ω–µ –≤–∞–∂–ª–∏–≤–∏–π)
        if(user.toLowerCase() === corr.toLowerCase()){
          markCorrect(inputEl);
        } else markWrong(inputEl);
      }
    }
    function markCorrect(el){ el.classList.remove('wrong'); el.classList.add('correct'); incrementStat('correct'); }
    function markWrong(el){ el.classList.remove('correct'); el.classList.add('wrong'); incrementStat('wrong'); }

    function incrementStat(kind){
      if(kind==='correct'){
        const el=document.getElementById('val-correct'); el.textContent = Number(el.textContent)+1;
      } else {
        const el=document.getElementById('val-wrong'); el.textContent = Number(el.textContent)+1;
      }
    }

    function finishLesson(){ alert('–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ.'); }

    /* ---------- Canvas: —Ä–æ–∑–º—ñ—Ä–∏ —Ç–∞ –ø—Ä–æ—Å—Ç–µ –º–∞–ª—é–≤–∞–Ω–Ω—è ---------- */
    const canvas = document.getElementById('board');
    const ctx = canvas.getContext('2d');
    function resizeCanvas(){
      const ratio = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.round(rect.width * ratio);
      canvas.height = Math.round(rect.height * ratio);
      ctx.setTransform(ratio,0,0,ratio,0,0);
      ctx.lineCap='round'; ctx.lineJoin='round'; ctx.lineWidth=2;
      ctx.clearRect(0,0,rect.width,rect.height);
    }
    window.addEventListener('resize', resizeCanvas);

    let tool='pen';
    function setTool(t){ tool=t; document.querySelectorAll('.btn-tool').forEach(b=>b.classList.remove('active')); if(t==='pen') document.getElementById('t-pen').classList.add('active'); else document.getElementById('t-eraser').classList.add('active'); }
    function clearCanvas(){ ctx.clearRect(0,0,canvas.width,canvas.height); }
    function drawGrid(){
      const rect = canvas.getBoundingClientRect();
      const step = 25;
      ctx.clearRect(0,0,rect.width,rect.height);
      ctx.strokeStyle='#eef2f7'; ctx.lineWidth=1;
      for(let x=0;x<rect.width;x+=step){ ctx.beginPath(); ctx.moveTo(x+0.5,0); ctx.lineTo(x+0.5,rect.height); ctx.stroke(); }
      for(let y=0;y<rect.height;y+=step){ ctx.beginPath(); ctx.moveTo(0,y+0.5); ctx.lineTo(rect.width,y+0.5); ctx.stroke(); }
    }

    // –ø—Ä–æ—Å—Ç–µ –º–∞–ª—é–≤–∞–Ω–Ω—è
    let drawing=false, last={x:0,y:0};
    canvas.addEventListener('pointerdown', e=>{ drawing=true; last={x:e.offsetX,y:e.offsetY}; });
    canvas.addEventListener('pointermove', e=>{ if(!

```html
<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ê–ª–≥–µ–±—Ä–∞ 10: –†—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏</title>

    <link rel="stylesheet" href="../css/style-core.css" />
    <link rel="stylesheet" href="../css/style-lesson.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
    <style>
      /* –õ–æ–∫–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è —à–∞–±–ª–æ–Ω—É (—â–æ–± —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–∞—Ü—é–≤–∞–ª–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ) */
      body { margin: 0; font-family: 'Segoe UI', sans-serif; display: flex; height: 100vh; overflow: hidden; background: #f4f7f9; }
      #tasks-section { flex: 1; display: flex; flex-direction: column; background: white; border-right: 1px solid #ddd; overflow-y: auto; }
      header { display: flex; align-items: center; justify-content: space-between; padding: 10px 20px; border-bottom: 2px solid #eee; background: #fff; position: sticky; top: 0; z-index: 10; }
      .content-container { padding: 20px; max-width: 900px; margin: 0 auto; }
      .stats-container { font-weight: bold; font-size: 1.1rem; }
      .exercise-block { margin-bottom: 30px; border: 1px solid #e1e8ed; border-radius: 12px; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
      .theory-box { background: #f0f7ff; padding: 15px; border-radius: 8px; border-left: 5px solid #2563eb; margin-bottom: 20px; }
      .task-item { margin: 15px 0; padding: 15px; border-bottom: 1px solid #f0f0f0; }
      .input-group { display: flex; gap: 10px; margin-top: 10px; }
      input { flex: 1; padding: 10px; border: 2px solid #cbd5e1; border-radius: 8px; font-size: 1rem; }
      input.correct { border-color: #10b981; background: #ecfdf5; }
      input.wrong { border-color: #ef4444; background: #fef2f2; }
      button { cursor: pointer; border: none; border-radius: 8px; transition: 0.2s; font-weight: 600; }
      .btn-finish { background: #1e293b; color: white; width: 100%; padding: 15px; font-size: 1.1rem; margin-top: 20px; }
      #board-section { width: 45%; display: flex; flex-direction: column; background: #f8fafc; min-width: 360px; }
      .tools { padding: 10px; background: #f1f5f9; border-bottom: 1px solid #ddd; display: flex; gap: 8px; }
      #board { flex: 1; background: white; cursor: crosshair; touch-action: none; display: block; width: 100%; height: 100%; }
      .btn-tool { padding: 8px 12px; background: white; border: 1px solid #cbd5e1; font-size: 1.2rem; }
      .btn-tool.active { background: #2563eb; color: white; }
      .hint-btn, .sol-btn { font-size: 0.8rem; color: #2563eb; background: none; text-decoration: underline; margin-right: 10px; }
      .hidden-box { display: none; margin-top: 10px; padding: 10px; background: #fffbeb; border: 1px dashed #f59e0b; border-radius: 6px; }
    </style>
  </head>
  <body>
    <div id="tasks-section">
      <header>
        <a href="../index.html" class="btn-home">‚Üê –ù–∞–∑–∞–¥</a>

        <div id="lesson-title-display" style="font-weight: 700; font-size: 1.1rem; text-align: center">
          –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É—Ä–æ–∫—É...
        </div>

        <div class="stats-container">
          ‚úÖ <span id="val-correct">0</span> ‚ùå <span id="val-wrong">0</span>
        </div>

        <button id="toggle-board-btn" class="btn-icon" title="–°—Ö–æ–≤–∞—Ç–∏/–ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ—à–∫–∞" onclick="toggleBoard()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="3" y1="9" x2="21" y2="9"></line>
            <line x1="9" y1="21" x2="9" y2="9"></line>
          </svg>
          <span>–î–æ—à–∫–∞</span>
        </button>
      </header>

      <div class="content-container">
        <div id="quiz-root"></div>
        <button class="btn-finish" onclick="finishLesson()">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫</button>
      </div>
    </div>

    <div id="board-section">
      <div class="tools">
        <button class="btn-tool active" onclick="setTool('pen')" id="t-pen">üñäÔ∏è</button>
        <button class="btn-tool" onclick="setTool('eraser')" id="t-eraser">üßπ</button>
        <button class="btn-tool" onclick="drawGrid()">üåê</button>
        <button class="btn-tool" onclick="clearCanvas()" style="color: red">‚ùå</button>
      </div>
      <canvas id="board"></canvas>
    </div>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <!-- –õ–æ–∫–∞–ª—å–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ (–º–æ–∂–Ω–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –≤–∞—à—ñ —Ñ–∞–π–ª–∏) -->
    <script>
      /* --- –î–∞–Ω—ñ —É—Ä–æ–∫—É: –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –≤—Å—ñ 20 –∑–∞–≤–¥–∞–Ω—å –∑–≥—ñ–¥–Ω–æ –∑ –≤–∞—à–∏–º —Å–ø–∏—Å–∫–æ–º --- */
      const LESSON_DATA = {
        title: "–ê–ª–≥–µ–±—Ä–∞ 10: –õ—ñ–Ω—ñ–π–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏",
        exercises: [
          {
            id: "section-1",
            title: "–†–æ–∑–¥—ñ–ª 1: –õ–æ–≥—ñ–∫–∞ —Ä—ñ–≤–Ω–æ–≤–∞–≥–∏ (–ë–∞–∑–æ–≤—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è)",
            desc: "–ü—Ä–æ—Å—Ç—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–∏–¥—É x + b = c –∞–±–æ a + x = b",
            visual: `
              <div class="theory-box">
                <p><strong>–ü—Ä–∞–≤–∏–ª–æ —Ç–µ—Ä–µ–∑—ñ–≤:</strong> –©–æ —Ä–æ–±–∏–º–æ –∑ –ª—ñ–≤–æ—é —á–∞—Å—Ç–∏–Ω–æ—é, —Ç–µ —Å–∞–º–µ —Ä–æ–±–∏–º–æ –∑ –ø—Ä–∞–≤–æ—é.</p>
                <p>–ü—Ä–∏–∫–ª–∞–¥: \\(x + 14 = 30 \\Rightarrow x = 30 - 14\\).</p>
              </div>
            `,
            tasks: [
              { id: "1", q: "$x + 14 = 30$", a: "16", solution: "$x = 30 - 14$" },
              { id: "2", q: "$x - 9 = -5$", a: "4", solution: "$x = -5 + 9$" },
              { id: "3", q: "$25 - x = 10$", a: "15", solution: "$x = 25 - 10$" },
              { id: "4", q: "$12 + x = 2$", a: "-10", solution: "$x = 2 - 12$" },
              { id: "5", q: "$x - 1.5 = 2$", a: "3.5", solution: "$x = 2 + 1.5$" }
            ]
          },

          {
            id: "section-2",
            title: "–†–æ–∑–¥—ñ–ª 2: –û—Å–Ω–æ–≤–Ω–∞ —Ñ–æ—Ä–º–∞ $ax = b$",
            desc: "–†–æ–∑–≤'—è–∑—É–≤–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω—å –≤–∏–¥—É $ax=b$",
            visual: `
              <div class="theory-box">
                <p><strong>–¢—Ä–∏ –≤–∏–ø–∞–¥–∫–∏ –¥–ª—è \\(ax=b\\):</strong></p>
                <ul style="list-style: none; padding-left: 10px;">
                  <li>–Ø–∫—â–æ \\(a \\neq 0\\), —Ç–æ \\(x = \\dfrac{b}{a}\\).</li>
                  <li>–Ø–∫—â–æ \\(a = 0\\) —ñ \\(b \\neq 0\\), —Ç–æ —Ä–æ–∑–≤'—è–∑–∫—ñ–≤ –Ω–µ–º–∞—î.</li>
                  <li>–Ø–∫—â–æ \\(a = 0\\) —ñ \\(b = 0\\), —Ç–æ —Ä–æ–∑–≤'—è–∑–∫—ñ–≤ –±–µ–∑–ª—ñ—á.</li>
                </ul>
              </div>
            `,
            tasks: [
              { id: "6", q: "$5x = 45$", a: "9", solution: "$x = 45 / 5$" },
              { id: "7", q: "$-3x = 21$", a: "-7", solution: "$x = 21 / (-3)$" },
              { id: "8", q: "$0.2x = 4$", a: "20", solution: "$x = 4 / 0.2 = 4 \\cdot 5$" },
              { id: "9", q: "$0x = 10$", a: "–Ω–µ–º–∞—î", solution: "–ù–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤, –±–æ 0 –Ω–µ –º–æ–∂–µ –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ 10." },
              { id: "10", q: "$0x = 0$", a: "–±–µ–∑–ª—ñ—á", solution: "–ë—É–¥—å-—è–∫–µ —á–∏—Å–ª–æ –ø—Ä–∏ –º–Ω–æ–∂–µ–Ω–Ω—ñ –Ω–∞ 0 –¥–∞—î 0 ‚Äî –±–µ–∑–ª—ñ—á —Ä–æ–∑–≤'—è–∑–∫—ñ–≤." }
            ]
          },

          {
            id: "section-3",
            title: "–†–æ–∑–¥—ñ–ª 3: –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–∞—Å—Ç–∫–∏ (–û–î–ó)",
            desc: "–†—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—Ä–æ–±–∞–º–∏ ‚Äî –Ω–µ –∑–∞–±—É–≤–∞—î–º–æ –æ–±–ª–∞—Å—Ç—å –¥–æ–ø—É—Å—Ç–∏–º–∏—Ö –∑–Ω–∞—á–µ–Ω—å (–û–î–ó).",
            visual: `
              <div class="theory-box">
                <p><strong>–ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –¥—Ä–æ–±—ñ–≤:</strong> \\(\\dfrac{A}{B} = 0\\) —Ç–æ–¥—ñ –π —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ \\(A = 0\\) —Ç–∞ \\(B \\neq 0\\).</p>
              </div>
            `,
            tasks: [
              { id: "11", q: "$\\dfrac{x-5}{x+2} = 0$", a: "5", solution: "–ß–∏—Å–µ–ª—å–Ω–∏–∫ \\(x-5=0\\) –¥–∞—î \\(x=5\\); –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞: –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ \\(5+2\\neq0\\)." },
              { id: "12", q: "$\\dfrac{2x+6}{x-1} = 0$", a: "-3", solution: "–†–æ–∑–≤'—è–∑–æ–∫ —á–∏—Å–µ–ª—å–Ω–∏–∫–∞: \\(2x+6=0\\Rightarrow x=-3\\); –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ \\(-3-1\\neq0\\)." },
              { id: "13", q: "$\\dfrac{x-4}{x-4} = 0$", a: "–Ω–µ–º–∞—î", solution: "–ü—Ä–∏ \\(x=4\\) —á–∏—Å–µ–ª—å–Ω–∏–∫ = 0, –∞–ª–µ –π –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ = 0 ‚Äî –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ." },
              { id: "14", q: "$\\dfrac{x(x-2)}{x} = 0$", a: "2", solution: "–í—ñ–¥–∫–∏–¥–∞—î–º–æ \\(x=0\\) (–∑–Ω–∞–º–µ–Ω–Ω–∏–∫), —á–∏—Å–µ–ª—å–Ω–∏–∫ –¥–∞—î \\(x=0\\) –∞–±–æ \\(x=2\\) ‚Äî –ª–∏—à–∞—î—Ç—å—Å—è \\(x=2\\)." },
              { id: "15", q: "$\\dfrac{x^2-9}{x-3} = 0$", a: "-3", solution: "–ß–∏—Å–µ–ª—å–Ω–∏–∫ –º–∞—î –∫–æ—Ä–µ–Ω—ñ \\(x=3\\) —Ç–∞ \\(x=-3\\); –∞–ª–µ \\(x=3\\) –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ (–∑–Ω–∞–º–µ–Ω–Ω–∏–∫ = 0), –æ—Ç–∂–µ \\(x=-3\\)." }
            ]
          },

          {
            id: "section-4",
            title: "–†–æ–∑–¥—ñ–ª 4: –í—Å—Ç—É–ø –¥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤",
            desc: "–ü–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –ø—Ä–∏ —è–∫–∏—Ö –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–æ–∑–≤'—è–∑–∫—ñ–≤.",
            visual: `
              <div class="theory-box">
                <p>–ê–Ω–∞–ª—ñ–∑—É—î–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Ä–æ–∑–≤'—è–∑–∫—ñ–≤ –≤—ñ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ \\(a\\).</p>
              </div>
            `,
            tasks: [
              { id: "16", q: "$ax = 5$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a: "0", solution: "–Ø–∫—â–æ \\(a=0\\), —Ç–æ —Ä—ñ–≤–Ω—è–Ω–Ω—è —Å—Ç–∞—î \\(0x=5\\) ‚Äî –Ω–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤." },
              { id: "17", q: "$(a-2)x = 0$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –∫–æ—Ä–µ–Ω—ñ–≤ –±–µ–∑–ª—ñ—á?", a: "2", solution: "–Ø–∫—â–æ \\(a=2\\), —Ç–æ \\(0x=0\\) ‚Äî –±–µ–∑–ª—ñ—á —Ä–æ–∑–≤'—è–∑–∫—ñ–≤." },
              { id: "18", q: "$\\dfrac{x-3}{x-a} = 0$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a: "3", solution: "–Ø–∫—â–æ \\(a=3\\), —Ç–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –∫–æ—Ä—ñ–Ω—å \\(x=3\\) —Ä–æ–±–∏—Ç—å –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –Ω—É–ª—å ‚Äî –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ." },
              { id: "19", q: "$(a+5)x = 7$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a: "-5", solution: "–Ø–∫—â–æ \\(a=-5\\), —Ç–æ \\(0x=7\\) ‚Äî –Ω–µ–º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤." },
              { id: "20", q: "$\\dfrac{x-a}{x-7} = 0$ ‚Äî –ø—Ä–∏ —è–∫–æ–º—É $a$ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?", a: "7", solution: "–Ø–∫—â–æ \\(a=7\\), —Ç–æ —á–∏—Å–µ–ª—å–Ω–∏–∫ –Ω—É–ª—å –ø—Ä–∏ \\(x=7\\), –∞–ª–µ —Ü–µ —Ä–æ–±–∏—Ç—å –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –Ω—É–ª—å ‚Äî –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ." }
            ]
          }
        ]
      };

      /* --- –ü—Ä–æ—Å—Ç–∏–π —Ä–µ–Ω–¥–µ—Ä–µ—Ä –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è LESSON_DATA —É #quiz-root --- */
      function renderLessonData() {
        const root = document.getElementById('quiz-root');
        root.innerHTML = ''; // –æ—á–∏—Å—Ç–∏—Ç–∏
        document.title = LESSON_DATA.title;
        document.getElementById('lesson-title-display').textContent = LESSON_DATA.title;

        LESSON_DATA.exercises.forEach(section => {
          const sec = document.createElement('section');
          sec.className = 'exercise-block';
          const h = document.createElement('h3');
          h.textContent = section.title;
          sec.appendChild(h);

          if (section.desc) {
            const p = document.createElement('p');
            p.textContent = section.desc;
            sec.appendChild(p);
          }

          if (section.visual) {
            const div = document.createElement('div');
            div.innerHTML = section.visual;
            sec.appendChild(div);
          }

          if (Array.isArray(section.tasks) && section.tasks.length) {
            section.tasks.forEach(task => {
              const t = document.createElement('div');
              t.className = 'task-item';
              const q = document.createElement('div');
              q.innerHTML = `<strong>${task.id}.</strong> <span class="question">${task.q}</span>`;
              t.appendChild(q);

              const inputGroup = document.createElement('div');
              inputGroup.className = 'input-group';

              const input = document.createElement('input');
              input.type = 'text';
              input.placeholder = '–í–≤–µ–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å';
              input.dataset.answer = String(task.a);
              inputGroup.appendChild(input);

              const checkBtn = document.createElement('button');
              checkBtn.className = 'btn-check';
              checkBtn.textContent = '–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏';
              checkBtn.onclick = () => {
                const user = input.value.trim();
                const correct = String(task.a).trim();
                if (user === correct) {
                  input.classList.remove('wrong');
                  input.classList.add('correct');
                  incrementStat('correct');
                } else {
                  input.classList.remove('correct');
                  input.classList.add('wrong');
                  incrementStat('wrong');
                }
              };
              inputGroup.appendChild(checkBtn);

              const showSol = document.createElement('button');
              showSol.className = 'sol-btn';
              showSol.textContent = '–ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–æ–∑–≤\'—è–∑–∞–Ω–Ω—è';
              showSol.onclick = () => {
                solBox.style.display = solBox.style.display === 'block' ? 'none' : 'block';
              };
              inputGroup.appendChild(showSol);

              t.appendChild(inputGroup);

              const solBox = document.createElement('div');
              solBox.className = 'hidden-box';
              solBox.innerHTML = `<strong>–í—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> ${task.a} <br><strong>–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è:</strong> ${task.solution || ''}`;
              t.appendChild(solBox);

              sec.appendChild(t);
            });
          }

          root.appendChild(sec);
        });

        // –ü—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–º–æ —Ñ–æ—Ä–º—É–ª–∏ KaTeX
        renderMath();
      }

      /* --- KaTeX auto-render –≤–∏–∫–ª–∏–∫ --- */
      function renderMath() {
        if (typeof renderMathInElement === 'function') {
          renderMathInElement(document.getElementById('quiz-root'), {
            delimiters: [
              { left: "\\(", right: "\\)", display: false },
              { left: "\\[", right: "\\]", display: true }
            ],
            throwOnError: false
          });
        }
      }

      /* --- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ --- */
      function incrementStat(kind) {
        if (kind === 'correct') {
          const el = document.getElementById('val-correct');
          el.textContent = Number(el.textContent) + 1;
        } else {
          const el = document.getElementById('val-wrong');
          el.textContent = Number(el.textContent) + 1;
        }
      }

      function finishLesson() {
        alert('–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ (–¥–µ–º–æ).');
      }

      /* --- –î–æ—à–∫–∞: –ø—Ä–æ—Å—Ç–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞–Ω–Ω—è —Ç–∞ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è canvas --- */
      const canvas = document.getElementById('board');
      const ctx = canvas.getContext('2d');
      let currentTool = 'pen';
      function setTool(tool) {
        currentTool = tool;
        document.querySelectorAll('.btn-tool').forEach(b => b.classList.remove('active'));
        if (tool === 'pen') document.getElementById('t-pen').classList.add('active');
        if (tool === 'eraser') document.getElementById('t-eraser').classList.add('active');
      }

      function resizeCanvas() {
        const ratio = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.round(rect.width * ratio);
        canvas.height = Math.round(rect.height * ratio);
        ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.lineWidth = 2;
        // –ø–æ—á–∞—Ç–∫–æ–≤–µ –æ—á–∏—â–µ–Ω–Ω—è
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
      window.addEventListener('resize', resizeCanvas);
      // –í–∏–∫–ª–∏–∫ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
      window.addEventListener('load', () => {
        resizeCanvas();
        renderLessonData();
      });

      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
      function drawGrid() {
        const rect = canvas.getBoundingClientRect();
        const step = 25;
        ctx.save();
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = '#eef2f7';
        ctx.lineWidth = 1;
        for (let x = 0; x < rect.width; x += step) {
          ctx.beginPath();
          ctx.moveTo(x + 0.5, 0);
          ctx.lineTo(x + 0.5, rect.height);
          ctx.stroke();
        }
        for (let y = 0; y < rect.height; y += step) {
          ctx.beginPath();
          ctx.moveTo(0, y + 0.5);
          ctx.lineTo(rect.width, y + 0.5);
          ctx.stroke();
        }
        ctx.restore();
      }

      function toggleBoard() {
        const b = document.getElementById('board-section');
        b.style.display = (b.style.display === 'none') ? 'flex' : 'flex';
        // —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ö–æ–≤–∞—Ç–∏/–ø–æ–∫–∞–∑—É–≤–∞—Ç–∏, –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞ 'none'/'flex'
        if (b.style.display === 'none') {
          document.getElementById('toggle-board-btn').setAttribute('aria-pressed', 'false');
        } else {
          document.getElementById('toggle-board-btn').setAttribute('aria-pressed', 'true');
        }
      }

      // –ü—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞–ª—é–≤–∞–Ω–Ω—è (–¥–µ–º–æ)
      let drawing = false;
      let last = { x: 0, y: 0 };
      canvas.addEventListener('pointerdown', (e) => {
        drawing = true;
        last = { x: e.offsetX, y: e.offsetY };
      });
      canvas.addEventListener('pointermove', (e) => {
        if (!drawing) return;
        if (currentTool === 'eraser') {
          ctx.globalCompositeOperation = 'destination-out';
          ctx.lineWidth = 12;
        } else {
          ctx.globalCompositeOperation = 'source-over';
          ctx.lineWidth = 2;
        }
        ctx.beginPath();
        ctx.moveTo(last.x, last.y);
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.strokeStyle = '#111827';
        ctx.stroke();
        last = { x: e.offsetX, y: e.offsetY };
      });
      canvas.addEventListener('pointerup', () => drawing = false);
      canvas.addEventListener('pointerleave', () => drawing = false);

      // –§—É–Ω–∫—Ü—ñ—ó-–∑–∞–≥–ª—É—à–∫–∏, —è–∫—â–æ –≤–∞—à—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ –æ—á—ñ–∫—É—é—Ç—å —ó—Ö
      function drawSystem() { drawGrid(); }
      function clearCanvasSafe() { clearCanvas(); }
      function setToolPen() { setTool('pen'); }
    </script>
  </body>
</html>
```

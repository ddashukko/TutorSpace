<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–ª–≥–µ–±—Ä–∞ 10: –†—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #4f46e5;
            --success: #10b981;
            --danger: #ef4444;
            --bg: #f9fafb;
            --text: #111827;
        }

        body, html {
            margin: 0; padding: 0; height: 100%; font-family: 'Inter', sans-serif;
            background-color: var(--bg); color: var(--text); overflow: hidden;
        }

        .container { display: flex; height: 100vh; width: 100vw; }

        /* –õ–Ü–í–ê –ß–ê–°–¢–ò–ù–ê: –ö–û–ù–¢–ï–ù–¢ */
        .content-side {
            flex: 1; overflow-y: auto; padding: 30px;
            border-right: 1px solid #e5e7eb; background: white;
        }

        header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #f3f4f6;
        }

        .btn-home { text-decoration: none; color: var(--primary); font-weight: 600; }
        .stats-container { background: #f3f4f6; padding: 8px 15px; border-radius: 20px; font-weight: bold; }

        .exercise-block {
            background: #ffffff; border: 1px solid #e5e7eb;
            border-radius: 12px; padding: 20px; margin-bottom: 25px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .theory-box {
            background: #eff6ff; border-left: 4px solid var(--primary);
            padding: 15px; border-radius: 0 8px 8px 0; margin-bottom: 20px;
        }

        .task-item { margin-top: 20px; padding-top: 15px; border-top: 1px solid #f3f4f6; }
        .math-box { font-size: 1.2rem; margin: 15px 0; text-align: center; }

        .input-group { display: flex; gap: 10px; margin: 10px 0; }
        input[type="text"] {
            flex: 1; padding: 10px; border: 2px solid #d1d5db;
            border-radius: 8px; font-size: 1rem;
        }

        button {
            padding: 10px 20px; border: none; border-radius: 8px;
            cursor: pointer; font-weight: 600; transition: 0.2s;
        }

        .btn-check { background: var(--primary); color: white; }
        .btn-check:hover { opacity: 0.9; }

        /* –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê: –î–û–®–ö–ê */
        .board-side { flex: 1; display: flex; flex-direction: column; background: #f3f4f6; }
        .tools { padding: 10px; background: white; border-bottom: 1px solid #e5e7eb; display: flex; gap: 10px; }
        #board { flex: 1; background: white; cursor: crosshair; touch-action: none; }

        .btn-tool { background: #f3f4f6; font-size: 1.2rem; padding: 8px 12px; }
        .btn-tool.active { background: var(--primary); color: white; }

        .hidden-content { display: none; margin-top: 10px; padding: 10px; background: #fffbeb; border-radius: 8px; font-size: 0.9rem; }
        .feedback { font-weight: bold; margin-top: 8px; }
    </style>
</head>
<body>

<div class="container">
    <div class="content-side">
        <header>
            <a href="#" class="btn-home">‚Üê –ù–∞–∑–∞–¥</a>
            <div id="lesson-title-display" style="font-weight: 700; font-size: 1.1rem;">–ê–ª–≥–µ–±—Ä–∞ 10: –†—ñ–≤–Ω—è–Ω–Ω—è –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</div>
            <div class="stats-container">
                ‚úÖ <span id="val-correct">0</span> ‚ùå <span id="val-wrong">0</span>
            </div>
        </header>

        <div id="quiz-root"></div>

        <button class="btn-check" style="width: 100%; padding: 15px; margin-top: 20px;" onclick="finishLesson()">
            –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫
        </button>
    </div>

    <div class="board-side">
        <div class="tools">
            <button class="btn-tool active" onclick="setTool('pen')" id="t-pen">üñäÔ∏è</button>
            <button class="btn-tool" onclick="setTool('eraser')" id="t-eraser">üßπ</button>
            <button class="btn-tool" onclick="drawGrid()">üåê</button>
            <button class="btn-tool" onclick="clearCanvas()" style="color: var(--danger)">‚ùå</button>
        </div>
        <canvas id="board"></canvas>
    </div>
</div>

<script>
    const LESSON_DATA = {
        title: "–ê–ª–≥–µ–±—Ä–∞ 10: –õ—ñ–Ω—ñ–π–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏",
        exercises: [
            {
                id: "info",
                title: "üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞",
                desc: "–û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω—å",
                visual: `
                    <div class="theory-box">
                        <p><strong>1. –ü—Ä–∞–≤–∏–ª–æ —Ç–µ—Ä–µ–∑—ñ–≤:</strong> –©–æ —Ä–æ–±–∏–º–æ –∑ –ª—ñ–≤–æ—é —á–∞—Å—Ç–∏–Ω–æ—é, —Ç–µ —Å–∞–º–µ —Ä–æ–±–∏–º–æ –∑ –ø—Ä–∞–≤–æ—é.</p>
                        <p><strong>2. –¢—Ä–∏ –æ–±–ª–∏—á—á—è \( ax = b \):</strong></p>
                        <ul>
                            <li>–Ø–∫—â–æ \( a \neq 0 \), —Ç–æ \( x = \frac{b}{a} \) (–û–¥–∏–Ω –∫–æ—Ä—ñ–Ω—å)</li>
                            <li>–Ø–∫—â–æ \( 0x = b \) (\( b \neq 0 \)), —Ç–æ <strong>–∫–æ—Ä–µ–Ω—ñ–≤ –Ω–µ–º–∞—î</strong></li>
                            <li>–Ø–∫—â–æ \( 0x = 0 \), —Ç–æ <strong>–∫–æ—Ä–µ–Ω—ñ–≤ –±–µ–∑–ª—ñ—á</strong></li>
                        </ul>
                        <p><strong>3. –î—Ä–æ–±–∏:</strong> \( \frac{A}{B} = 0 \), —è–∫—â–æ \( A = 0 \) —Ç–∞ \( B \neq 0 \).</p>
                    </div>
                `,
                tasks: []
            },
            {
                id: "3",
                title: "–í–ø—Ä–∞–≤–∞ 3: –†—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—Ä–æ–±–∞–º–∏",
                desc: "–î—Ä—ñ–± –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é, –∫–æ–ª–∏ —á–∏—Å–µ–ª—å–Ω–∏–∫ –Ω—É–ª—å, –∞ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ ‚Äî –Ω—ñ.",
                tasks: [
                    { id: "3.1", q: "\\frac{x-3}{x+5} = 0", a: "3", hint: "–ß–∏—Å–µ–ª—å–Ω–∏–∫ \( x-3=0 \). –ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ –Ω–µ —Å—Ç–∞—î –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –Ω—É–ª–µ–º." },
                    { id: "3.2", q: "\\frac{2x-8}{x-1} = 0", a: "4", hint: "–†–æ–∑–≤'—è–∂–∏ \( 2x-8=0 \)." },
                    { id: "3.3", q: "\\frac{x+4}{x+4} = 0 \\text{ (—î –∫–æ—Ä—ñ–Ω—å —á–∏ –Ω–µ–º–∞—î?)}", a: "–Ω–µ–º–∞—î", hint: "–Ø–∫—â–æ —á–∏—Å–µ–ª—å–Ω–∏–∫ –Ω—É–ª—å (\( x=-4 \)), —â–æ —Å—Ç–∞—î—Ç—å—Å—è –∑—ñ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫–æ–º?" }
                ]
            },
            {
                id: "4",
                title: "–í–ø—Ä–∞–≤–∞ 4: –õ–æ–≥—ñ–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤",
                desc: "–ü–∞—Ä–∞–º–µ—Ç—Ä \( a \) ‚Äî —Ü–µ —á–∏—Å–ª–æ, —è–∫–µ –º–∏ –º–∞—î–º–æ –¥–æ—Å–ª—ñ–¥–∏—Ç–∏.",
                tasks: [
                    { id: "4.3", q: "\\frac{x-5}{x-a} = 0. \\text{ –ü—Ä–∏ —è–∫–æ–º—É } a \\text{ —Ä–æ–∑–≤'—è–∑–∫—ñ–≤ –Ω–µ–º–∞—î?}", a: "5", hint: "–ö–æ–ª–∏ —î–¥–∏–Ω–∏–π –∫–æ—Ä—ñ–Ω—å —á–∏—Å–µ–ª—å–Ω–∏–∫–∞ (\( x=5 \)) –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–π –∑–Ω–∞–º–µ–Ω–Ω–∏–∫–æ–º?" },
                    { id: "4.4", q: "ax = a. \\text{ –ü—Ä–∏ —è–∫–æ–º—É } a \\text{ –∫–æ—Ä–µ–Ω—ñ–≤ –±–µ–∑–ª—ñ—á?}", a: "0", hint: "–ü—Ä–∏ —è–∫–æ–º—É \( a \) —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç—å—Å—è –Ω–∞ \( 0x = 0 \)?" }
                ]
            }
        ]
    };

    let correctCount = 0;
    let wrongCount = 0;

    function init() {
        const root = document.getElementById('quiz-root');
        LESSON_DATA.exercises.forEach(ex => {
            const exDiv = document.createElement('div');
            exDiv.className = 'exercise-block';
            exDiv.innerHTML = `<h3>${ex.title}</h3><p>${ex.desc}</p>${ex.visual || ''}`;
            
            ex.tasks.forEach(t => {
                const taskDiv = document.createElement('div');
                taskDiv.className = 'task-item';
                taskDiv.innerHTML = `
                    <div class="math-box">\( ${t.q} \)</div>
                    <div class="input-group">
                        <input type="text" id="ans-${t.id}" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å...">
                        <button class="btn-check" onclick="checkTask('${t.id}', '${t.a}')">OK</button>
                    </div>
                    <div id="feedback-${t.id}" class="feedback"></div>
                    <button onclick="toggleHint('${t.id}')" style="background: none; color: var(--primary); padding: 0; font-size: 0.8rem; text-decoration: underline;">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
                    <div id="hint-${t.id}" class="hidden-content">${t.hint}</div>
                `;
                exDiv.appendChild(taskDiv);
            });
            root.appendChild(exDiv);
        });
    }

    function checkTask(id, correctAns) {
        const userAns = document.getElementById(`ans-${id}`).value.trim().toLowerCase();
        const feedback = document.getElementById(`feedback-${id}`);
        
        if (userAns === correctAns.toLowerCase()) {
            feedback.innerHTML = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
            feedback.style.color = "var(--success)";
            correctCount++;
        } else {
            feedback.innerHTML = "‚ùå –ù–µ–≤—ñ—Ä–Ω–æ, —Å–ø—Ä–æ–±—É–π —â–µ.";
            feedback.style.color = "var(--danger)";
            wrongCount++;
        }
        document.getElementById('val-correct').innerText = correctCount;
        document.getElementById('val-wrong').innerText = wrongCount;
    }

    function toggleHint(id) {
        const hint = document.getElementById(`hint-${id}`);
        hint.style.display = hint.style.display === 'block' ? 'none' : 'block';
    }

    function finishLesson() {
        alert(`–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! \n–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö: ${correctCount} \n–ü–æ–º–∏–ª–æ–∫: ${wrongCount} \n–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ ‚Äî —Ü–µ —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞! üöÄ`);
    }

    // WHITEBOARD LOGIC
    const canvas = document.getElementById('board');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let currentTool = 'pen';

    function resize() {
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
    }
    window.onresize = resize;
    resize();

    canvas.addEventListener('mousedown', () => drawing = true);
    canvas.addEventListener('mouseup', () => { drawing = false; ctx.beginPath(); });
    canvas.addEventListener('mousemove', (e) => {
        if (!drawing) return;
        const rect = canvas.getBoundingClientRect();
        ctx.lineWidth = currentTool === 'pen' ? 2 : 20;
        ctx.lineCap = 'round';
        ctx.strokeStyle = currentTool === 'pen' ? '#1e293b' : 'white';
        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    });

    function setTool(tool) {
        currentTool = tool;
        document.querySelectorAll('.btn-tool').forEach(b => b.classList.remove('active'));
        document.getElementById(`t-${tool}`).classList.add('active');
    }

    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

    function drawGrid() {
        ctx.strokeStyle = '#e5e7eb';
        ctx.lineWidth = 1;
        for(let i=0; i<canvas.width; i+=30) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); }
        for(let i=0; i<canvas.height; i+=30) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke(); }
    }

    init();
</script>

</body>
</html>
